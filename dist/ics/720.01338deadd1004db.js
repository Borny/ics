"use strict";(self.webpackChunkics=self.webpackChunkics||[]).push([[720],{6720:(S,c,r)=>{r.r(c),r.d(c,{LoginViewModule:()=>C});var _=r(6019),s=r(9133),u=r(1382),d=r(82),g=r(4382),e=r(3668),f=r(9171),p=r(3855),h=r(3475),T=r(1893),m=r(6031),x=r(4275);function w(t,i){1&t&&e._UZ(0,"mat-spinner",5)}function L(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"p",7),e._uU(2," Une erreur est survenue, veuillez r\xe9essayer "),e.qZA(),e.TgZ(3,"atom-button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().onReload()}),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("type","button")("text",n.RELOAD_BTN_TEXT)}}function Z(t,i){1&t&&(e.TgZ(0,"p",20),e._uU(1," Votre compte \xe0 bien \xe9t\xe9 cr\xe9\xe9, connectez-vous. "),e.qZA())}function N(t,i){1&t&&(e.TgZ(0,"p",21),e._uU(1," Cette adresse email n'est associ\xe9e \xe0 aucun compte. "),e.qZA())}function E(t,i){1&t&&(e.TgZ(0,"p",21),e._uU(1," Le mot de passe est incorrect. "),e.qZA())}function F(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Veuillez renseigner votre email"),e.qZA())}function M(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Veuillez renseigner un mot de passe valide"),e.qZA())}function I(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"form",10,11),e.NdJ("submit",function(){e.CHM(n);const l=e.MAs(1);return e.oxw(2).onLogin(l)}),e.YNc(2,Z,2,0,"p",12),e.YNc(3,N,2,0,"p",13),e.YNc(4,E,2,0,"p",13),e.TgZ(5,"mat-form-field"),e.TgZ(6,"mat-label"),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",14,15),e.YNc(10,F,2,0,"mat-error",4),e.qZA(),e.TgZ(11,"mat-form-field"),e.TgZ(12,"mat-label"),e._uU(13,"Mot de passe"),e.qZA(),e._UZ(14,"input",16,17),e.YNc(16,M,2,0,"mat-error",4),e.qZA(),e.TgZ(17,"a",18),e._uU(18,"Mot de passe oubli\xe9 ?"),e.qZA(),e._UZ(19,"atom-button",19),e.qZA()}if(2&t){const n=e.MAs(1),o=e.MAs(9),l=e.MAs(15),a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",a.isUserCreated),e.xp6(1),e.Q6J("ngIf",a.noUserFound),e.xp6(1),e.Q6J("ngIf",a.wrongPassword),e.xp6(6),e.Q6J("ngIf",o.invalid&&n.touched),e.xp6(6),e.Q6J("ngIf",l.invalid&&n.touched),e.xp6(3),e.Q6J("type","submit")("text",a.CONNECT_BTN_TEXT)("isDisabled",n.invalid)}}function A(t,i){1&t&&(e.TgZ(0,"p",28),e._uU(1," Cette adresse email existe d\xe9j\xe0 "),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Veuillez renseigner votre email"),e.qZA())}function v(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Veuillez renseigner un mot de passe"),e.qZA())}function O(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"form",10,22),e.NdJ("submit",function(){e.CHM(n);const l=e.MAs(1);return e.oxw(2).onSignup(l)}),e.YNc(2,A,2,0,"p",23),e.TgZ(3,"mat-form-field"),e.TgZ(4,"mat-label"),e._uU(5,"Email"),e.qZA(),e._UZ(6,"input",24,25),e.YNc(8,U,2,0,"mat-error",4),e.qZA(),e.TgZ(9,"mat-form-field"),e.TgZ(10,"mat-label"),e._uU(11,"Cr\xe9er un mot de passe"),e.qZA(),e._UZ(12,"input",26,27),e.YNc(14,v,2,0,"mat-error",4),e.qZA(),e._UZ(15,"atom-button",19),e.qZA()}if(2&t){const n=e.MAs(1),o=e.MAs(7),l=e.MAs(13),a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!a.isLoading&&a.userAlreadyExists),e.xp6(6),e.Q6J("ngIf",o.invalid&&n.touched),e.xp6(6),e.Q6J("ngIf",l.invalid&&n.touched),e.xp6(1),e.Q6J("type","submit")("text",a.SIGNUP_BTN_TEXT)("isDisabled",n.invalid)}}function y(t,i){if(1&t&&(e.TgZ(0,"mat-card"),e.YNc(1,I,20,8,"form",9),e.YNc(2,O,16,6,"form",9),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.showLogInForm),e.xp6(1),e.Q6J("ngIf",n.showSignUpForm)}}const P=[{path:"",component:(()=>{class t{constructor(n){this.authService=n,this.isLoading=!1,this.loginFailed=!1,this.noUserFound=!1,this.wrongPassword=!1,this.isUserCreated=!1,this.userAlreadyExists=!1,this.CONNECT_BTN_TEXT="Se connecter",this.SIGNUP_BTN_TEXT="S'inscrire",this.RELOAD_BTN_TEXT="R\xe9essayer",this.HEADING_LOGIN="Se connecter",this.HEADING_SIGNUP="Cr\xe9er un compte",this.LOGIN_FORM_TEXT="D\xe9j\xe0 membre ?",this.SIGNUP_FORM_TEXT="Pas encore de compte ?",this.LOGIN_FORM_BTN_TEXT="Se connecter",this.SIGNUP_FORM_BTN_TEXT="S'inscrire"}ngOnInit(){this.heading=this.HEADING_LOGIN,this.showLogInForm=!0,this.toggleFormText=this.SIGNUP_FORM_TEXT,this.toggleFormBtnText=this.SIGNUP_FORM_BTN_TEXT,this._loginFailedListener()}ngOnDestroy(){this.loginFailed$.unsubscribe()}onLogin(n){n.invalid||(this.isLoading=!0,this.authService.login(n.value))}onSignup(n){n.invalid||(this.isLoading=!0,this.authService.signup(n.value).subscribe(o=>{this.isLoading=!1,this.onToggleForm(),this.isUserCreated=!0},o=>{this.isLoading=!1,"User already exists"===o.error.message?this.userAlreadyExists=!0:this.loginFailed=!0}))}onReload(){location.reload()}onToggleForm(){this.showLogInForm?(this.heading=this.HEADING_SIGNUP,this.toggleFormText=this.LOGIN_FORM_TEXT,this.toggleFormBtnText=this.LOGIN_FORM_BTN_TEXT):(this.heading=this.HEADING_LOGIN,this.toggleFormText=this.SIGNUP_FORM_TEXT,this.toggleFormBtnText=this.SIGNUP_FORM_BTN_TEXT),this.showLogInForm=!this.showLogInForm,this.showSignUpForm=!this.showSignUpForm}_loginFailedListener(){this.loginFailed$=this.authService.getUserLoginFailed().subscribe(n=>(this.noUserFound=!1,this.wrongPassword=!1,this.isLoading=!1,this.loginFailedMessage=n.message,n.message?"No user found"===n.message?this.noUserFound=!0:"Wrong password"===n.message?this.wrongPassword=!0:void 0:this.loginFailed=!0))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["login"]],decls:6,vars:4,consts:[[1,"color-primary-font"],[1,"form__container"],["diameter","50","color","accent",4,"ngIf"],["class","error-message__container",4,"ngIf"],[4,"ngIf"],["diameter","50","color","accent"],[1,"error-message__container"],[1,"error-message__content"],[1,"btn",3,"type","text","click"],["class","login-form",3,"submit",4,"ngIf"],[1,"login-form",3,"submit"],["loginForm","ngForm"],["class","color-primary text-center",4,"ngIf"],["class","warning-text text-center",4,"ngIf"],["matInput","","type","email","name","loginEmail","ngModel","","placeholder","Email","required","","email",""],["loginEmail","ngModel"],["matInput","","type","password","name","loginPassword","placeholder","Mot de passe","ngModel","","required","","minlength","6"],["loginPassword","ngModel"],["routerLink","/mot-de-passe-oubli\xe9",1,"text-center","link","font-size-sm"],[1,"btn",3,"type","text","isDisabled"],[1,"color-primary","text-center"],[1,"warning-text","text-center"],["signupForm","ngForm"],["class","warning-text",4,"ngIf"],["matInput","","type","email","name","signupEmail","ngModel","","placeholder","Email","required","","email",""],["signupEmail","ngModel"],["matInput","","type","password","name","signupPassword","placeholder","Mot de passe","ngModel","","required","","minlength","6"],["signupPassword","ngModel"],[1,"warning-text"]],template:function(n,o){1&n&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,w,1,0,"mat-spinner",2),e.YNc(4,L,4,2,"div",3),e.YNc(5,y,3,2,"mat-card",4),e.qZA()),2&n&&(e.xp6(1),e.Oqu(o.heading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&o.loginFailed),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&!o.loginFailed))},directives:[_.O5,p.$g,h.r,T.a8,s._Y,s.JL,s.F,m.KE,m.hX,x.Nt,s.Fj,s.JJ,s.On,s.Q7,s.on,s.wO,g.yS,m.TO],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column;justify-content:center;align-items:center;min-height:calc(100% - 188px)}@media (min-width: 768px){[_nghost-%COMP%]{min-height:calc(100% - 178px)}}h1[_ngcontent-%COMP%]{margin:3rem auto 0}.warning-text[_ngcontent-%COMP%]{text-align:center;color:#f4a734}mat-card[_ngcontent-%COMP%]{width:100%;max-width:480px}.form__container[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex:1;justify-content:center;align-items:center;width:100%;max-width:300px;margin:0 auto}.form__container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:100%}.form__container[_ngcontent-%COMP%]   .error-message__content[_ngcontent-%COMP%]{text-align:center}.btn[_ngcontent-%COMP%]{display:block;margin:2rem auto}.login__toggle-form[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1rem 0}"]}),t})()}];let V=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.Bz.forChild(P)],g.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[_.ez,s.u5,V,d.q,u.m]]}),t})()}}]);